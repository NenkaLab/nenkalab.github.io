import{r as k}from"./CHsho6K8.js";import"./DKVkhY2e.js";import{s as A,b as w}from"./CFvQ5weI.js";import{g as M}from"./GAunCV5s.js";const N=()=>{const t=A;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},U={subscribe(t){return N().page.subscribe(t)}};function K(t,n){if(t==="")return"";const e=new URL(t,n).pathname;return e.endsWith("/")?e.slice(0,-1):e}function $(t,n){const e=Q(t),s=X(e,n),[a,o]=H(s);return[a,o]}const B=(t,n,e)=>[n,t,e??""].filter(s=>s!=="/").join("")||"/";function X(t,n){const e=t.replace(n,"");return e.startsWith("/")?e:`/${e}`}function H(t){const e=["/.html__data.json","/__data.json"].find(s=>t.endsWith(s));return e?[t.slice(0,-e.length)||"/",e]:[t,void 0]}function Q(t){try{return decodeURI(t)}catch{return t}}const Y=t=>({url:n})=>{try{const[e,s]=$(n.pathname,w),a=t.getLanguageFromLocalisedPath(e);if(!a)return n.pathname;const o=t.getCanonicalPath(e,a);return B(o,w,s)}catch{return n.pathname}};function q(t){return`/${t.split("/").filter(Boolean).join("/")}`}function G(t){const n=t.map(e=>typeof e=="string"?s=>s===e:s=>e.test(s));return e=>n.some(s=>s(q(e)))}const b="rtl",I="ltr";function J(t){try{const n=new Intl.Locale(t);return"textInfo"in n?n.textInfo.direction===b?b:I:n.getTextInfo().direction===b?b:I}catch{return I}}function Z(t){const n=t.map(e=>[e,J(e)]);return Object.fromEntries(n)}const V=0,W=1,L=2,tt=4,m=0,v=1,R=2;function et(t){const n=nt(rt);return t.sort((e,s)=>{var a,o,i,c,r,u;const l=F(e).map(n),f=F(s).map(n);for(let h=0;h<Math.max(l.length,f.length);h+=1){const g=l[h],x=f[h];if(!g)return-1;if(!x)return 1;for(let _=0;_<Math.max(g.length,x.length);_+=1){const p=g[_],d=x[_];if((p==null?void 0:p[m])||(d==null?void 0:d[m])){if(!p)return-1;if(!d)return 1;const S=((a=g[_+1])==null?void 0:a[v])||((i=(o=l[h+1])==null?void 0:o[0])==null?void 0:i[v]),T=((c=x[_+1])==null?void 0:c[v])||((u=(r=f[h+1])==null?void 0:r[0])==null?void 0:u[v]),z=S&&T,E=S&&!T,P=!S&&T;if((p[m]&&d[m])===L){if(z)continue;if(E)return-1;if(P)return 1}if(p[m]===L)return E?-1:1;if(d[m]===L)return P?1:-1;if(p[R]!==d[R])return(-1)**+p[R];if(p[m]!==d[m])return(-1)**+(p[m]>d[m])}else if((p==null?void 0:p[v])!==(d==null?void 0:d[v]))return st(p[v],d[v])}}return e<s?1:-1})}function nt(t){const n=new Map;return e=>(n.has(e)||n.set(e,t(e)),n.get(e))}function rt(t){const n=[];let e=0;for(;e<=t.length;){const s=t.indexOf("[",e),a=s===-1;if(n.push([V,t.slice(e,a?void 0:s),!1]),a)break;const o=t[s+1]==="["?W:t[s+1]==="."?L:tt,i=o===W?"]]":"]",c=t.indexOf(i,s);if(c===-1)throw new Error(`Invalid route definition ${t}`);const r=t.slice(s,e=c+i.length);n.push([o,r,r.includes("=")])}return n}const F=t=>t.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function st(t,n){if(t===n)return 0;let e=0;for(;t[e]===n[e];)e++;return t[e]?n[e]?t[e]<n[e]?-1:1:-1:1}const ot=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function it(t){const n=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${D(t).map(s=>{const a=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(s);if(a)return n.push({name:a[1],matcher:a[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const o=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(s);if(o)return n.push({name:o[1],matcher:o[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!s)return;const i=s.split(/\[(.+?)\](?!\])/);return"/"+i.map((r,u)=>{if(u%2){if(r.startsWith("x+"))return y(String.fromCharCode(parseInt(r.slice(2),16)));if(r.startsWith("u+"))return y(String.fromCharCode(...r.slice(2).split("-").map(_=>parseInt(_,16))));const l=ot.exec(r);if(!l)throw new Error(`Invalid param: ${r}`);const[,f,h,g,x]=l;return n.push({name:g,matcher:x,optional:!!f,rest:!!h,chained:h?u===1&&i[0]==="":!1}),h?"(.*?)":f?"([^/]*)?":"([^/]+?)"}return y(r)}).join("")}).join("")}/?$`),params:n}}function at(t,n,e){const s={},a=t.slice(1),o=a.filter(c=>c!==void 0);let i=0;for(const[c,r]of n.entries()){let u=a[c-i];if(r.chained&&r.rest&&i&&(u=a.slice(c-i,c+1).filter(f=>f).join("/"),i=0),u===void 0){r.rest&&(s[r.name]="");continue}if(r.matcher&&!e[r.matcher])return;if((e[r.matcher]??(()=>!0))(u)){s[r.name]=u;const f=n[c+1],h=a[c+1];f&&!f.rest&&f.optional&&h&&r.chained&&(i=0),!f&&!h&&Object.keys(s).length===o.length&&(i=0);continue}if(r.optional&&r.chained){i++;continue}return}if(!i)return s}function y(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const ct=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function O(t,n){return"/"+D(t).map(e=>e.replace(ct,(s,a,o,i)=>{const c=n[i];if(!c){if(a||o&&c!==void 0)return"";throw new Error(`Missing parameter '${i}' in route ${t}`)}if(c[0]=="/"||c.endsWith("/"))throw new Error(`Parameter '${i}' in route ${t} cannot start or end with a slash`);return c})).filter(Boolean).join("/")}function C(t,n,e){const s=et(n);for(const a of s){const o=it(a),i=o.pattern.exec(ut(t));if(!i)continue;const c=at(i,o.params,e);if(c)return{params:c,id:a}}}const ut=t=>t.endsWith("/")?t.slice(0,-1):t,D=t=>t.slice(1).split("/");function ft(t,n,e,s,a){function o(r){const l=r.split("/")[1];if(t.includes(l)&&(a==="always"||l!==n))return l;if(a==="never")return n}function i(r,u){const l=r.endsWith("/")&&r!=="/";r=l?r.slice(0,-1):r;let f=ht(r,u,e,s);return l&&(f+="/"),(a==="always"||u!==n)&&(f=`/${u}${f}`),f}function c(r,u){const l=r.endsWith("/")&&r!=="/";(a==="always"||u!==n)&&(r=r.replace(`/${u}`,"")||"/");const f=l;r=f?r.slice(0,-1):r;let h=lt(r,u,e,s);return f&&(h+="/"),h}return{getLanguageFromLocalisedPath:o,getLocalisedPath:i,getCanonicalPath:c}}function lt(t,n,e,s){for(const[a,o]of Object.entries(e)){if(!(n in o))continue;const i=o[n];if(!i)continue;const c=C(t,[i],s);if(c)return O(a,c.params)}return t}function ht(t,n,e,s){const a=C(t,Object.keys(e),s);if(!a)return t;const o=e[a.id];if(!o)return t;const i=o[n];return i?O(i,a.params):t}function pt(t,n){const e={},s=[],a=t.sourceLanguageTag,o={defaultLanguageTag:a,runtime:t,translations:e,matchers:{},exclude:G(s),prefixDefaultLanguage:"never",textDirection:Z(t.availableLanguageTags),seo:{noAlternateLinks:!1}},i=ft(t.availableLanguageTags,a,o.translations,o.matchers,o.prefixDefaultLanguage);return Object.freeze(e),Object.freeze(o),{config:o,strategy:i,reroute:()=>Y(i),handle:()=>{throw new Error("")},getLanguageFromUrl(c){const r=j(w),[u]=$(c.pathname,r);return o.exclude(u)?o.defaultLanguageTag:i.getLanguageFromLocalisedPath(u)||o.defaultLanguageTag},resolveRoute(c,r=void 0){if(o.exclude(c))return c;const u=j(w),[l,f]=$(c,u);if(r=r??t.languageTag(),!c.startsWith(u))return c;const h=i.getLocalisedPath(l,r);return B(h,u,f)},route(c){const r=j(w),[u,l]=$(c,r),h=i.getLanguageFromLocalisedPath(u)||o.defaultLanguageTag,g=i.getCanonicalPath(u,h);return B(g,r,l)}}}function j(t){return t===""?"":t.startsWith("/")?t:K(t,new URL(M(U).url))}const xt=pt(k);export{$ as a,xt as i,K as n,U as p,B as s};
